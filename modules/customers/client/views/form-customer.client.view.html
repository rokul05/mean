<section ng-controller="CustomersController">
  <div class="modal-header">
    <h1>{{customer._id ? 'Update: '+customer.firstName+' '+ customer.surname : 'New Customer'}}</h1>
  </div>
  <div class="modal-body">
    <form name="customerForm">
      <fieldset>
        <div class="row">

          <alert type="danger" ng-show="error" class="text-center text-danger">
            <span ng-bind="error"></span>
          </alert>
   
          <div class="col-sm-6 text-center">
            <i class="glyphicon glyphicon-user cust-profile" ng-class="{'text-primary':customer.referred, 'text-pink':!customer.referred}"></i>
          </div>
          <div class="col-sm-6">
            <div class="form-group" show-errors>
              <label class="control-label" for="firstName">First Name</label>
              <input name="firstName" type="text" ng-model="customer.firstName" id="firstName" class="form-control" placeholder="First Name" required>
              <div ng-messages="customerForm.firstName.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer First Name is required.</p>
              </div>
            </div>
            <div class="form-group" show-errors>
              <label class="control-label" for="surname">Surname</label>
              <input name="surname" type="text" ng-model="customer.surname" id="surname" class="form-control" placeholder="Surname" required>
              <div ng-messages="customerForm.surname.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Surname is required.</p>
              </div>
            </div>
            <div class="form-group" show-errors>
              <label class="control-label" for="suburb">Suburb</label>
              <input name="suburb" type="text" ng-model="customer.suburb" id="suburb" class="form-control" placeholder="Suburb" required>
              <div ng-messages="customerForm.suburb.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Suburb is required.</p>
              </div>
            </div>
            <div class="form-group" show-errors>
              <label class="control-label" for="country">Country</label>
              <input name="country" type="text" ng-model="customer.country" id="country" class="form-control" placeholder="Country" required>
              <div ng-messages="customerForm.country.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Country is required.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <div class="form-group">
              <label class="control-label" for="referred">Referred</label>
              <!--http://ziscloud.github.io/angular-bootstrap-toggle/-->
              <div class="col-lg-12">
                <toggle name="referred" size="btn-sm" ng-model="customer.referred" class="btn-primary" id="referred"></toggle>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-group" show-errors>
              <label class="control-label" for="phone">Phone</label>
              <input name="phone" type="text" ng-model="customer.phone" id="phone" class="form-control" placeholder="Phone" required>
              <div ng-messages="customerForm.phone.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Phone is required.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-sm-push-6">
            <div class="form-group" show-errors>
              <label class="control-label" for="email">email</label>
              <input name="email" type="text" ng-model="customer.email" id="email" class="form-control" placeholder="email" required>
              <div ng-messages="customerForm.email.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer email is required.</p>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-sm-pull-6">
            <div class="form-group">
              <label class="control-label" for="channel">Channel</label>
              <ut-dropdown name="channel" ng-model="customer.channel" options="presets.channels" ng-change="changeChannel()" required></ut-dropdown>
              <div ng-messages="customerForm.channel.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Channel is required.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <div class="form-group" show-errors>
              <label class="control-label" for="industry">Industry</label>
              <input name="industry" type="text" ng-model="customer.industry" id="industry" class="form-control" placeholder="Industry" required>
              <div ng-messages="customerForm.industry.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Customer Industry is required.</p>
              </div>
            </div>
          </div>
        </div>

      </fieldset>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-success btn-lg" ng-click="create(customerForm.$valid)" ng-disabled="customerForm.$invalid">{{customer._id ? 'Update' : 'Create'}}</button>
    <button class="btn btn-warning btn-lg" ng-click="cancel()">Cansel</button>
  </div>
  <pre>{{customers | json }}</pre>
</section>
